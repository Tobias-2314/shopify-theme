{% comment %}
  Section: Bundle Selector (Based on React Component)
{% endcomment %}

<div class="bundle-selector-wrapper max-w-2xl mx-auto" data-product-price="{{ product.price }}">
  <!-- Bundle Options -->
  <div class="bundles-container mb-6">
    {% comment %}
      Option 1: 1 Unit
      (Assuming Variant 1 is single unit)
    {% endcomment %}
    <div class="bundle-option" onclick="selectBundle(1, 39.99)" id="bundle-1">
      <div class="flex items-center gap-4">
        <div class="radio-circle"><div class="radio-dot"></div></div>
        <div class="flex-1">
          <h3 class="font-bold text-lg">1 Unidad</h3>
        </div>
        <div class="text-right">
          <p class="text-2xl font-bold">39.99‚Ç¨</p>
        </div>
      </div>
    </div>

    {% comment %} Option 2: 2 Units (Most Popular) {% endcomment %}
    <div class="bundle-option active" onclick="selectBundle(2, 59.99)" id="bundle-2">
      <div class="bundle-badge" style="background-color: var(--color-blue-600)">M√ÅS POPULAR</div>
      <div class="flex items-center gap-4">
        <div class="radio-circle"><div class="radio-dot"></div></div>
        <div class="flex-1">
          <div class="flex items-center gap-2">
            <h3 class="font-bold text-lg">2 Unidades</h3>
            <span
              class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-bold"
              style="background:var(--color-red-100); color:var(--color-red-700)"
              >AHORRA 25%</span
            >
          </div>
          <p class="text-sm text-gray-500">29.99‚Ç¨ por unidad</p>
        </div>
        <div class="text-right">
          <p class="text-sm text-gray-400 line-through">79.98‚Ç¨</p>
          <p class="text-2xl font-bold">59.99‚Ç¨</p>
        </div>
      </div>
    </div>

    {% comment %} Option 3: 3 Units (Best Value) {% endcomment %}
    <div class="bundle-option" onclick="selectBundle(3, 74.99)" id="bundle-3">
      <div class="bundle-badge" style="background-color: var(--color-green-600)">MEJOR VALOR</div>
      <div class="flex items-center gap-4">
        <div class="radio-circle"><div class="radio-dot"></div></div>
        <div class="flex-1">
          <div class="flex items-center gap-2">
            <h3 class="font-bold text-lg">3 Unidades</h3>
            <span
              class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-bold"
              style="background:var(--color-red-100); color:var(--color-red-700)"
              >AHORRA 37%</span
            >
          </div>
          <p class="text-sm text-gray-500">24.99‚Ç¨ por unidad</p>
        </div>
        <div class="text-right">
          <p class="text-sm text-gray-400 line-through">119.97‚Ç¨</p>
          <p class="text-2xl font-bold">74.99‚Ç¨</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Upsells -->
  <div class="upsells-container mb-6">
    <h3 class="font-bold text-lg flex items-center gap-2 mb-3"><span>‚ú®</span> A√±ade valor a tu pedido</h3>

    <!-- Upsell 1 -->
    <div class="upsell-box" onclick="toggleUpsell(this, 'ebook')" id="upsell-ebook">
      <div class="flex items-center gap-4">
        <div class="checkbox-square">
          <svg
            class="w-4 h-4 text-white"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            style="width:16px; color:white;"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
          </svg>
        </div>
        <div class="flex-1">
          <h4 class="font-bold">E-book Exclusivo</h4>
          <p class="text-sm text-gray-500">Gu√≠a completa de uso y mantenimiento</p>
        </div>
        <div class="text-right">
          <p class="text-lg font-bold text-green-600" style="color:var(--color-green-600)">GRATIS</p>
        </div>
      </div>
    </div>
  </div>

  <!-- CTA Button -->
  <button class="btn-primary" onclick="checkout()">
    <div class="btn-shimmer"></div>
    <span class="relative z-10" id="cta-text">AGREGAR AL CARRITO - 59.99‚Ç¨</span>
  </button>

  <!-- Trust Badges -->
  <div class="flex justify-center gap-6 mt-6 text-sm text-gray-600">
    <div class="flex items-center gap-2"><span>üõ°Ô∏è</span> Env√≠o Gratis</div>
    <div class="flex items-center gap-2"><span>üîí</span> Pago Seguro</div>
    <div class="flex items-center gap-2"><span>‚úÖ</span> 30 D√≠as Garant√≠a</div>
  </div>
</div>

<script>
  let currentPrice = 59.99;
  let currentId = 2;

  function selectBundle(id, price) {
    // Visual Update
    document.querySelectorAll('.bundle-option').forEach((el) => el.classList.remove('active'));
    document.getElementById(`bundle-${id}`).classList.add('active');

    // State Update
    currentId = id;
    currentPrice = price;
    updateCTA();
  }

  function toggleUpsell(el, id) {
    el.classList.toggle('active');
    // Note: Price logic for upsells would go here if they weren't free
  }

  function updateCTA() {
    document.getElementById('cta-text').innerText = `AGREGAR AL CARRITO - ${currentPrice.toFixed(2)}‚Ç¨`;
  }

  function checkout() {
    // Direct Checkout Logic
    // In a real scenario, we map ID 1, 2, 3 to actual Shopify Variant IDs
    // For now, alerting or redirecting

    // Assuming 2nd variant is default for ID 2
    alert(`Proceeding to checkout with Bundle ${currentId} for ${currentPrice}‚Ç¨`);
    // window.location.href = '/checkout';
  }
</script>

{% schema %}
{
  "name": "Bundle Selector React",
  "settings": [],
  "presets": [{ "name": "Bundle Selector React" }]
}
{% endschema %}
