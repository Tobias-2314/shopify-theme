{% schema %}
{
  "name": "Hero Product (Auto)",
  "settings": [
    {
      "type": "header",
      "content": "‚ú® PRODUCTO PRINCIPAL"
    },
    {
      "type": "product",
      "id": "product",
      "label": "Seleccionar Producto",
      "info": "Si seleccionas un producto aqu√≠, la imagen, t√≠tulo y precio se cargar√°n autom√°ticamente."
    },
    {
      "type": "header",
      "content": "‚úèÔ∏è PERSONALIZACI√ìN (Opcional)"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "T√≠tulo Personalizado",
      "info": "Deja en blanco para usar el nombre del producto"
    },
    {
      "type": "textarea",
      "id": "text",
      "label": "Descripci√≥n / Subt√≠tulo",
      "default": "La mejor tecnolog√≠a al alcance de tu mano. Env√≠o r√°pido y garant√≠a total."
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Imagen Personalizada",
      "info": "Deja en blanco para usar la imagen del producto"
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Texto del Badge",
      "default": "üî• OFERTA HOY"
    },
    {
      "type": "header",
      "content": "üé® ESTILO VISUAL"
    },
    {
      "type": "select",
      "id": "depth_level",
      "label": "Estilo de Profundidad",
      "options": [
        { "value": "none", "label": "Plano (Flat)" },
        { "value": "glass", "label": "Glassmorphism (Moderno)" },
        { "value": "brutal", "label": "Neo-Brutalism (Borde Negro)" }
      ],
      "default": "glass"
    },
    {
      "type": "header",
      "content": "üì¶ UPSELL (BUNDLE)"
    },
    {
      "type": "checkbox",
      "id": "show_upsell",
      "label": "Activar Upsell",
      "default": true
    },
    {
      "type": "product",
      "id": "upsell_product",
      "label": "Producto de Upsell"
    },
    {
      "type": "text",
      "id": "upsell_heading",
      "label": "T√≠tulo Upsell",
      "default": "Completa tu pack"
    },
    {
      "type": "text",
      "id": "upsell_title",
      "label": "Nombre del Item Extra",
      "default": "E-book Garant√≠a"
    },
    {
      "type": "text",
      "id": "upsell_desc",
      "label": "Descripci√≥n Extra",
      "default": "Protecci√≥n extendida + Gu√≠a de uso"
    },
    {
      "type": "text",
      "id": "upsell_price",
      "label": "Texto Precio Extra",
      "default": "GRATIS"
    }
  ],
  "presets": [
    {
      "name": "Hero Product (Auto)"
    }
  ]
}
{% endschema %}

{% comment %} LOGIC: Auto-fill from Product {% endcomment %}
{% assign target_product = all_products[section.settings.product] %}
{% assign title = section.settings.heading | default: target_product.title | default: 'Selecciona un Producto' %}
{% assign featured_image = section.settings.image | default: target_product.featured_image %}
{% assign current_variant = target_product.selected_or_first_available_variant %}

<section
  class="hero-section relative overflow-hidden"
  style="padding-top: 60px; padding-bottom: 60px; background: linear-gradient(180deg, #F9FAFB 0%, #FFFFFF 100%);"
>
  <!-- Glassmorphism Background Effect -->
  {% if section.settings.depth_level == 'glass' %}
    <div
      class="absolute top-0 left-0 w-full h-96 bg-gradient-to-b from-blue-50/50 to-transparent pointer-events-none"
    ></div>
  {% endif %}

  <div class="container relative z-10">
    <div class="hero-grid grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
      <!-- Left Column: Image -->
      <div class="relative order-1">
        <!-- Badge -->
        {% if section.settings.badge_text != blank %}
          <div class="absolute -top-4 -left-4 z-20">
            <span
              class="inline-block px-4 py-2 text-white font-bold text-sm rounded-full shadow-lg transform rotate-[-2deg]"
              style="background-color: var(--color-red-600, #dc2626);"
            >
              {{ section.settings.badge_text }}
            </span>
          </div>
        {% endif %}

        <!-- Image Container -->
        <div
          class="
            relative w-full aspect-square md:aspect-[4/5] overflow-hidden bg-white
            {% if section.settings.depth_level == 'brutal' %} border-4 border-black shadow-[8px_8px_0px_#000]
            {% else %} rounded-[2rem] shadow-2xl
            {% endif %}
          "
        >
          {% if featured_image %}
            {{
              featured_image
              | image_url: width: 1000
              | image_tag:
                class: 'w-full h-full object-cover hover:scale-105 transition-transform duration-700',
                loading: 'eager'
            }}
          {% else %}
            {{ 'product-1' | placeholder_svg_tag: 'w-full h-full object-cover bg-gray-100' }}
          {% endif %}
        </div>

        <!-- Floating Stats (Fixed Visuals) -->
        <div
          class="absolute bottom-8 -right-4 glass-panel p-4 rounded-xl flex items-center gap-4 animate-float hidden md:flex"
          style="background: rgba(255,255,255,0.9); backdrop-filter: blur(8px); box-shadow: 0 10px 30px rgba(0,0,0,0.1);"
        >
          <div class="flex flex-col">
            <span class="text-xs text-gray-500 uppercase font-bold tracking-wider">Valoraci√≥n</span>
            <div class="flex items-center gap-1">
              <span class="text-yellow-400">‚òÖ</span>
              <span class="font-bold">4.9/5</span>
            </div>
          </div>
          <div class="w-px h-8 bg-gray-200"></div>
          <div class="flex flex-col">
            <span class="text-xs text-gray-500 uppercase font-bold tracking-wider">Env√≠o</span>
            <span class="font-bold text-green-600">24-48H</span>
          </div>
        </div>
      </div>

      <!-- Right Column: Content & Selector -->
      <div class="order-2">
        <div class="mb-8">
          {% if target_product %}
            <div class="flex items-center gap-2 mb-4">
              <span class="px-3 py-1 bg-black text-white text-xs font-bold rounded-full">NUEVO STOCK</span>
              {% if target_product.available %}
                <span class="text-green-600 text-sm font-bold flex items-center gap-1">‚óè Disponible</span>
              {% endif %}
            </div>
          {% endif %}

          <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6 leading-tight tracking-tight">
            {{ title }}
          </h1>

          <div class="prose text-gray-600 text-lg mb-8 leading-relaxed">
            {{ section.settings.text }}
          </div>

          <!-- Price Display (if not using bundle selector primarily) -->
          {% if target_product %}
            <!-- This snippet replaces the nested section to fix the Liquid Error -->
            {% render 'bundle-selector-snippet', product: target_product %}
          {% else %}
            <div class="p-6 bg-yellow-50 border border-yellow-200 rounded-xl text-yellow-800">
              <strong>‚ö†Ô∏è No hay producto seleccionado</strong>
              <p class="text-sm mt-1">
                Ve al editor del tema y selecciona un producto en la configuraci√≥n de esta secci√≥n.
              </p>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</section>
